<template>
  <div style="padding-left: .5rem; padding-right: .5rem">
    <div
      class="inline"
      style="font-weight: 500;"
    >Your Locks</div>
    <div class="pull-right">
      <spinbutton
        onclick.call="_refresh()"
        class="locksRefreshButton"
        spin.to-view="loading"
        title="Refresh Locks List"
      ></spinbutton>
    </div>
  </div>
  <table class="table locksForRep">
    <thead class="thead-light">
      <tr>
        <th style="text-align:left;width: 20%;">Amount</th>
        <th>Of</th>
        <th>Releasable</th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <tr if.to-view="_locks.length === 0">
        <td
          colspan="100"
          style="text-align: center; padding-top: 1rem"
        >
          You have not yet submitted any locks
        </td>
      </tr>
      <tr repeat.for="lock of _locks">
        <td>${lock.amount | ethwei}</td>
        <td>${lock.units}</td>
        <td style="white-space:nowrap">
          ${lock.releaseTime | date:lock.releasableToday ? 'table-time' : 'table-date'}</span>
          <span if.one-time="lock.releasableToday"> today</span>
        </td>
        <td style="text-align:center;">
          <button
            click.delegate="_release(lock)"
            disabled.bind="!lock.canRelease"
            if.to-view="!lock.releasing && !lock.released"
            class="btn btn-link"
          >Release</button>
          <div
            if.to-view="lock.releasing && !lock.released"
            title="Releasing"
            class="inline text-primary fa-refresh fa fa-spin"
            style="line-height: 21px"
          ></div>
          <button
            if.to-view="lock.released"
            class="btn btn-link"
            disabled
          >Completed</button>
        </td>
      </tr>
    </tbody>
  </table>
</template>
