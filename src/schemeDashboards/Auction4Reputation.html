<template>
  <div
    class="pageloader"
    if.bind="!loaded"
  >
    <pageloading></pageloading>
  </div>
  <div else>
    <instructions if.to-view="!auctionIsOver">You can receive reputation by bidding GEN tokens. There will be 10 auctions, each will run for 9 days
      and offer 10,000 REP. The DutchX DAO will receive all the GEN collected in the auctions. To participate all you
      need to do is enter the amount of GEN you wish to bid and click "Bid". The reputation will be distributed pro
      rata once the auction is complete.
    </instructions>

    <div class="scheme-dashboard-body">

      <div
        class="message"
        if.to-view="auctionNotBegun"
      >The initialization period has not yet begun, you can't bid</div>
      <div
        class="message"
        if.to-view="auctionIsOver"
      >The initialization period has ended</div>

      <div
        class="message"
        if.to-view="!auctionNotBegun && !auctionIsOver"
      >
        ${msRemainingInAuctionCountdown | timespan:"seconds"} left in the current auction ${currentAuctionNumber} of ${auctionCount}.
        You have already bid ${amountBid | ethwei} out of a total ${totalAmountBid | ethwei} GEN bid in this auction.
      </div>

      <form if.bind="!auctionNotBegun && !auctionIsOver">
        <div class="row">
          <div class="col-5">
            <div class="form-group bmd-form-group">
              <label for="bidAmount">Tokens to bid</label>
              <input
                id="bidAmount"
                class="form-control"
                type="number"
                value.bind="bidAmount | ethwei & updateTrigger:'blur'"
              />
            </div>
            <div class="form-group">
              <spinbutton
                disabled.bind="bidding"
                onclick.call="bid(bidAmount)"
                css="btn-submit btn-sm"
                as-button="true"
                text="Bid"
                spin.to-view="bidding"
                title.to-view="bidding ? 'Submitting bid...' : 'Submit Bid'"
              ></spinbutton>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</template>
