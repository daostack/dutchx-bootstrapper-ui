<template>
  <div
    class="pageloader"
    if.bind="!loaded"
  >
    <pageloading></pageloading>
  </div>
  <div else>
    <instructions if.to-view="!lockingPeriodIsEnded">Select the amount of ETH you would like to lock and the length you wish to lock it for. You can lock
      as much ETH as you like, for up to one year. At the end of the initialization period, your reputation will be
      calculated pro rata according to the total locked ETH.</instructions>
    <div class="scheme-dashboard-body">
      <div
        class="message"
        if.to-view="lockingPeriodHasNotStarted"
      >The initialization period has not yet begun, you can't yet lock.</div>
      <div
        class="message"
        if.to-view="lockingPeriodIsEnded"
      >The initialization period has ended.</div>
      <form
        if.to-view="inLockingPeriod"
        with.bind="lockModel"
      >
        <div class="row">
          <div class="col-5">
            <div class="form-group bmd-form-group">
              <label for="lockAmount">ETH to lock</label>
              <numeric-input
                css="form-control"
                id="lockAmount"
                value.bind="amount | ethwei"
              ></numeric-input>
            </div>
          </div>
          <div class="col-6">
            <div class="form-group bmd-form-group">
              <label for="lockingPeriod">Number of days</label>
              <numeric-input
                css="form-control"
                id="lockingPeriod"
                value.bind="period | secondsDays"
              ></numeric-input>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <div
                if.to-view="inLockingPeriod && !alreadyLocked"
                class="form-group"
              >
                <spinbutton
                  onclick.call="lock()"
                  disabled.bind="locking"
                  css="btn-submit btn-sm"
                  as-button="true"
                  text="Submit"
                  spin.to-view="locking"
                  title.to-view="locking ? 'Locking...' : 'Submit Lock'"
                ></spinbutton>
              </div>
            </div>
          </div>
        </div>
      </form>

      <div if.to-view="locks.length">
        <locks-for-reputation
          locks.to-view="locks"
          release.call="release({lock})"
          wrapper.one-time="wrapper"
          refresh.call="getLocks()"
        ></locks-for-reputation>
      </div>
    </div>
  </div>
</template>
