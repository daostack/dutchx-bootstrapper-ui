<template>
  <div
    class="pageloader"
    if.bind="!loaded"
  >
    <pageloading></pageloading>
  </div>
  <div else>
    <instructions if.to-view="!lockingPeriodIsEnded">
      <p>Your MGN tokens are locked by default in the DutchX smart contract.
        Reputation will be distributed to all MGN holders who opt in on receiving DutchX DAO reputation.
        All you need to do is activate this option here.</p>

      <p>️️️️<span class="warning-icon" style="font-size:1rem">⚠️</span>&nbsp;Please make sure you are connected in MetaMask with the same ETH address that holds your MGN
        tokens.</p>
    </instructions>

    <div class="scheme-dashboard-body">
      <div
        class="message"
        if.to-view="!globalPeriodHasStarted"
      >The initialization period has not yet begun, you can't yet register or claim.</div>

      <div
        class="message"
        if.to-view="!alreadyRegistered && lockingPeriodHasNotStarted && globalPeriodHasStarted"
      >
        ${msUntilCanLockCountdown | timespan:"seconds"} until the 24-hour MGN activation period begins.
      </div>

      <div
        class="message"
        if.to-view="inLockingPeriod && !alreadyLocked"
      >
        ${msRemainingInPeriodCountdown | timespan:"seconds"} remaining to activate MGN Tokens.
      </div>

      <div
        class="message"
        if.to-view="lockingPeriodIsEnded"
      >The initialization period has ended.</div>

      <div
        class="message"
        if.to-view="inLockingPeriod && alreadyLocked"
      >You have activated your claim.</div>

      <div
        class="message"
        if.to-view="globalPeriodHasStarted && !inLockingPeriod && alreadyRegistered"
      >You have registered for automatic claim activation.</div>

      <form>

        <div class="form-group">
          <spinbutton
            if.to-view="globalPeriodHasStarted
              && lockingPeriodHasNotStarted
              && !alreadyRegistered"
            disabled.bind="locking"
            onclick.call="register()"
            css="btn-submit btn-sm"
            as-button="true"
            text="Register"
            spin.to-view="registering"
            title.to-view="registering ? 'Registering...' : 'Register'"
          ></spinbutton>
          <spinbutton
            if.to-view="inLockingPeriod && !alreadyLocked"
            onclick.call="lock()"
            disabled.bind="locking"
            css="btn-submit btn-sm"
            as-button="true"
            text="Claim"
            spin.to-view="locking"
            title.to-view="locking ? 'Claiming...' : 'Claim'"
          ></spinbutton>
        </div>
      </form>
    </div>
  </div>
</template>
